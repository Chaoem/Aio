<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Audio Web</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #1e1e1e;
  color: #fff;
  text-align: center;
  padding: 20px;
}
input, button {
  font-size: 16px;
  padding: 10px;
  margin: 10px 0;
  width: 90%;
  max-width: 400px;
  border-radius: 8px;
  border: none;
}
button { background: #ff5722; color: #fff; cursor: pointer; }
button:hover { background: #ff784e; }
audio { width: 100%; margin-top: 20px; }
</style>
</head>
<body>

<h2>Mini Audio Web</h2>

<input type="text" id="audioUrl" placeholder="Nhập link audio trực tiếp (MP3 / Catbox / direct)" />
<br>
<button id="playBtn">▶️ Play</button>
<button id="pauseBtn">⏸️ Pause</button>

<p id="historyText">History: Chưa có</p>

<audio id="player" controls></audio>

<script>
// Lấy history từ localStorage
const historyText = document.getElementById("historyText");
const player = document.getElementById("player");
const playBtn = document.getElementById("playBtn");
const pauseBtn = document.getElementById("pauseBtn");
const audioUrlInput = document.getElementById("audioUrl");

let lastUrl = localStorage.getItem("lastUrl") || "";
let lastTime = parseFloat(localStorage.getItem("lastTime")) || 0;

if(lastUrl){
    player.src = lastUrl;
    player.currentTime = lastTime;
    historyText.textContent = "History: " + lastUrl;
}

playBtn.addEventListener("click", ()=>{
    const url = audioUrlInput.value.trim();
    if(url){
        player.src = url;
        player.play();
        historyText.textContent = "History: " + url;
        localStorage.setItem("lastUrl", url);
    }
});

pauseBtn.addEventListener("click", ()=>{
    player.pause();
});

// Cập nhật thời gian nghe
player.addEventListener("timeupdate", ()=>{
    localStorage.setItem("lastTime", player.currentTime);
});
</script>

</body>
</html>
